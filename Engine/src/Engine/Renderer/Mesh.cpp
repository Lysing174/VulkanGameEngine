#include "pch.h"
#include "Mesh.h"

namespace Engine {
    void Mesh::Bind()
    {
        m_VertexBuffer->Bind();
        m_IndexBuffer->Bind();
    }
    Mesh Mesh::CreateCube()
    {
        // 定义顶点数据 (24个顶点: 6个面 * 4个顶点)
        std::vector<MeshVertex> vertices = {
            // --- Front Face (法线指向 +Z) ---
            // Pos                      // Normal           // UV
            {{-0.5f, -0.5f,  0.5f},    {0.0f, 0.0f, 1.0f}, {0.0f, 0.0f}}, // 0: 左下
            {{ 0.5f, -0.5f,  0.5f},    {0.0f, 0.0f, 1.0f}, {1.0f, 0.0f}}, // 1: 右下
            {{ 0.5f,  0.5f,  0.5f},    {0.0f, 0.0f, 1.0f}, {1.0f, 1.0f}}, // 2: 右上
            {{-0.5f,  0.5f,  0.5f},    {0.0f, 0.0f, 1.0f}, {0.0f, 1.0f}}, // 3: 左上

            // --- Back Face (法线指向 -Z) ---
            {{ 0.5f, -0.5f, -0.5f},    {0.0f, 0.0f, -1.0f}, {0.0f, 0.0f}}, // 4
            {{-0.5f, -0.5f, -0.5f},    {0.0f, 0.0f, -1.0f}, {1.0f, 0.0f}}, // 5
            {{-0.5f,  0.5f, -0.5f},    {0.0f, 0.0f, -1.0f}, {1.0f, 1.0f}}, // 6
            {{ 0.5f,  0.5f, -0.5f},    {0.0f, 0.0f, -1.0f}, {0.0f, 1.0f}}, // 7

            // --- Left Face (法线指向 -X) ---
            {{-0.5f, -0.5f, -0.5f},    {-1.0f, 0.0f, 0.0f}, {0.0f, 0.0f}}, // 8
            {{-0.5f, -0.5f,  0.5f},    {-1.0f, 0.0f, 0.0f}, {1.0f, 0.0f}}, // 9
            {{-0.5f,  0.5f,  0.5f},    {-1.0f, 0.0f, 0.0f}, {1.0f, 1.0f}}, // 10
            {{-0.5f,  0.5f, -0.5f},    {-1.0f, 0.0f, 0.0f}, {0.0f, 1.0f}}, // 11

            // --- Right Face (法线指向 +X) ---
            {{ 0.5f, -0.5f,  0.5f},    {1.0f, 0.0f, 0.0f}, {0.0f, 0.0f}}, // 12
            {{ 0.5f, -0.5f, -0.5f},    {1.0f, 0.0f, 0.0f}, {1.0f, 0.0f}}, // 13
            {{ 0.5f,  0.5f, -0.5f},    {1.0f, 0.0f, 0.0f}, {1.0f, 1.0f}}, // 14
            {{ 0.5f,  0.5f,  0.5f},    {1.0f, 0.0f, 0.0f}, {0.0f, 1.0f}}, // 15

            // --- Top Face (法线指向 +Y) ---
            {{-0.5f,  0.5f,  0.5f},    {0.0f, 1.0f, 0.0f}, {0.0f, 0.0f}}, // 16
            {{ 0.5f,  0.5f,  0.5f},    {0.0f, 1.0f, 0.0f}, {1.0f, 0.0f}}, // 17
            {{ 0.5f,  0.5f, -0.5f},    {0.0f, 1.0f, 0.0f}, {1.0f, 1.0f}}, // 18
            {{-0.5f,  0.5f, -0.5f},    {0.0f, 1.0f, 0.0f}, {0.0f, 1.0f}}, // 19

            // --- Bottom Face (法线指向 -Y) ---
            {{-0.5f, -0.5f, -0.5f},    {0.0f, -1.0f, 0.0f}, {0.0f, 0.0f}}, // 20
            {{ 0.5f, -0.5f, -0.5f},    {0.0f, -1.0f, 0.0f}, {1.0f, 0.0f}}, // 21
            {{ 0.5f, -0.5f,  0.5f},    {0.0f, -1.0f, 0.0f}, {1.0f, 1.0f}}, // 22
            {{-0.5f, -0.5f,  0.5f},    {0.0f, -1.0f, 0.0f}, {0.0f, 1.0f}}  // 23
        };

        // 定义索引数据 (36个索引: 6个面 * 2个三角形 * 3个索引)
        std::vector<uint32_t> indices = {
            0, 1, 2, 2, 3, 0,       // Front
            4, 5, 6, 6, 7, 4,       // Back
            8, 9, 10, 10, 11, 8,    // Left
            12, 13, 14, 14, 15, 12, // Right
            16, 17, 18, 18, 19, 16, // Top
            20, 21, 22, 22, 23, 20  // Bottom
        };

        return Mesh(vertices, indices);
    }
}